# !/bin/bash

SERVER=$1
TIMES=$2

echo "TCP_RR"
# netperf -l 10 -H 192.168.137.1 -p 12865 -t TCP_RR -- -r 100,200 -O "MIN_LAETENCY, MAX_LATENCY, MEAN_LATENCY, P90_LATENCY, P99_LATENCY, STDDEV_LATENCY, THROUGHPUT, THROUGHPUT_UNITS"
netperf -l ${TIMES} -H ${SERVER} -t TCP_RR -- -r 100,200 -O "MIN_LAETENCY, MAX_LATENCY, MEAN_LATENCY, P90_LATENCY, P99_LATENCY, STDDEV_LATENCY, THROUGHPUT, THROUGHPUT_UNITS"
# netperf -l 60 -H ${SERVER} -t TCP_RR -- -r 100,200
# netperf -l 60 -H ${SERVER} -t TCP_RR -- -r 100,200
# netperf -l 60 -H ${SERVER} -t TCP_RR -- -r 100,200
# netperf -l 60 -H ${SERVER} -t TCP_RR -- -r 100,200

echo "UDP_RR"
netperf -l ${TIMES} -H ${SERVER} -t UDP_RR -- -r 100,200 -O "MIN_LAETENCY, MAX_LATENCY, MEAN_LATENCY, P90_LATENCY, P99_LATENCY, STDDEV_LATENCY, THROUGHPUT, THROUGHPUT_UNITS"
# netperf -l 60 -H ${SERVER} -t UDP_RR -- -r 100,200
# netperf -l 60 -H ${SERVER} -t UDP_RR -- -r 100,200
# netperf -l 60 -H ${SERVER} -t UDP_RR -- -r 100,200
# netperf -l 60 -H ${SERVER} -t UDP_RR -- -r 100,200